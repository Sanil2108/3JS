!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){"use strict";let o,i,r,l,a,s;t.r(n);let d,c,p,u,f,m,E,h=[],w=["Hind","Spitfire","Special Forces"],T=[{size:.3,location:"./models/hind/scene.gltf",componentsLocation:"./models/hind/properties.json"},{size:1,location:"./models/spitfire/scene.gltf",componentsLocation:"./models/spitfire/properties.json"},{size:1e4,location:"./models/specialForces/scene.gltf"}];function g(e){let n=[],t=[],o=[];if(e.children.length>0)for(let i=0;i<e.children.length;i++)n.push(e.children[i]),e.children[i].isMesh&&(t.append(e.children[i]),o.append(e.children[i].material));for(;n.length>0;){let e=n[0];if(e.children.length>0)for(let i=0;i<e.children.length;i++)if(n.push(e.children[i]),e.children[i].isMesh){t.push(e.children[i]);let n=e.children[i].material;n=Object.assign(n,e.children[i].material),o.push(n)}n.splice(n.indexOf(e),1)}return[t,o]}function H(e){if(s){if(i.remove(s),h.length>0){i.remove(h[n].model);for(let e=0;e<h.length;e++);}h=[]}a||(a=new THREE.GLTFLoader);let n=w.indexOf(e),t=T[n];a.load(t.location,e=>{s=e.scene,e.scene.scale.set(t.size,t.size,t.size),t.offset&&(e.scene.position.x+=t.offset.x)},e=>{console.log(e.loaded/e.total*100+"% loaded")})}function R(e,n,t){if(f)return;let o=document.createElement("div");o.className="tooltip",o.textContent=t,o.style.left=e+"px",o.style.top=n+"px",document.body.append(o),f=o}function b(e){for(let n=0;n<h[e].meshes.length;n++)h[e].meshes[n].material=E}function y(e){for(let n=0;n<h[e].meshes.length;n++)h[e].meshes[n].material=h[e].materials[n]}function x(){window.requestAnimationFrame(x),l.update(),c.setFromCamera(p,o),function(){let e=!1;for(let n=0;n<h.length;n++){let t=c.intersectObjects(h[n].model.children,!0);t&&t[0]?(m!=n&&R(u.x,u.y,h[n].name),b(n),e=!0,m=n):(m==n&&(m=null,document.body.removeChild(f),f=null),y(n))}document.body.style.cursor=e?"pointer":"auto"}(),d.position.x=o.position.x,d.position.y=o.position.y,d.position.z=o.position.z,r.render(i,o)}!function(){(o=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e7)).position.set(400,400,400),i=new THREE.Scene,(r=new THREE.WebGLRenderer({antialias:!0})).setSize(window.innerWidth,window.innerHeight),c=new THREE.Raycaster,p=new THREE.Vector2,u=new THREE.Vector2,(l=new THREE.OrbitControls(o)).update(),(E=new THREE.MeshPhongMaterial({color:16776960})).opacity=.5;let e=[new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/front.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/back.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/up.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/down.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/right.png"),side:THREE.DoubleSide}),new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("models/wallpaper/left.png"),side:THREE.DoubleSide})],n=new THREE.CubeGeometry(1e4,1e4,1e4),t=new THREE.Mesh(n,e);t.position.set(0,0,0),i.add(t);let s=new THREE.AmbientLight(16777215,1);i.add(s),(d=new THREE.SpotLight(16777215,5,1e5)).position.set(400,400,400),d.castShadow=!0,i.add(d),document.body.appendChild(r.domElement),r.render(i,o),window.onresize=(()=>{o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight),r.render(i,o)}),window.onmousemove=(()=>{p.x=event.clientX/window.innerWidth*2-1,p.y=-event.clientY/window.innerHeight*2+1,u.x=event.clientX,u.y=event.clientY}),document.getElementById("planeSelectorSelector").addEventListener("select",e=>{let n=e.detail.selected;H(n)}),x(),H("Spitfire"),function(e){let n=new XMLHttpRequest,t=T[w.indexOf(e)];n.open("GET",t.componentsLocation),n.onreadystatechange=function(){if(4!=n.readyState)return;let e=JSON.parse(n.responseText);for(let n of e.components)console.log("Loading "+n.name+" from "+n.location),a||(a=new THREE.GLTFLoader),a.load(n.location,e=>{i.add(e.scene),e.scene.scale.set(t.size,t.size,t.size);let o=g(e.scene);h.push({meshes:o[0],materials:o[1],description:n.description,model:e.scene,name:n.name}),e.scene.traverse(e=>{e.name=n.name})},e=>{console.log(e.loaded/e.total*100+"% of "+n.name+" loaded")},e=>{console.log(e)})},n.send()}("Spitfire")}()}]);