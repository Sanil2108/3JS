!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";i.r(t);let n=.2,r=.25,o=.667,s=[],c=[];class u{constructor(e,t,i,n,r,o){this.x=e,this.y=t,this.z=i,this.radius=n,this.color=r,this.sphere=o,this.vector=new THREE.Vector3,this.density=1,this.volume=1.33*Math.PI*this.radius**3,this.mass=this.density*this.volume}setCursors(e,t,i){this.xCursor=e,this.yCursor=t,this.zCursor=i}setCursorLines(e,t,i){this.cursorLineX=e,this.cursorLineY=t,this.cursorLineZ=i}setPositionX(e){this.sphere.position.x=e,this.yCursor.position.x=e,this.xCursor.position.x=e+n+this.radius,this.zCursor.position.x=e,this.cursorLineX.geometry.vertices[0].x=e,this.cursorLineX.geometry.vertices[1].x=e+n+this.radius,this.cursorLineX.geometry.verticesNeedUpdate=!0,this.cursorLineY.geometry.vertices[0].x=e,this.cursorLineY.geometry.vertices[1].x=e,this.cursorLineY.geometry.verticesNeedUpdate=!0,this.cursorLineZ.geometry.vertices[0].x=e,this.cursorLineZ.geometry.vertices[1].x=e,this.cursorLineZ.geometry.verticesNeedUpdate=!0}setPositionY(e){this.sphere.position.y=e,this.yCursor.position.y=e+n+this.radius,this.xCursor.position.y=e,this.zCursor.position.y=e,this.cursorLineX.geometry.vertices[0].y=e,this.cursorLineX.geometry.vertices[1].y=e,this.cursorLineX.geometry.verticesNeedUpdate=!0,this.cursorLineY.geometry.vertices[0].y=e,this.cursorLineY.geometry.vertices[1].y=e+n+this.radius,this.cursorLineY.geometry.verticesNeedUpdate=!0,this.cursorLineZ.geometry.vertices[0].y=e,this.cursorLineZ.geometry.vertices[1].y=e,this.cursorLineZ.geometry.verticesNeedUpdate=!0}setPositionZ(e){this.sphere.position.z=e,this.yCursor.position.z=e,this.xCursor.position.z=e,this.zCursor.position.z=e+n+this.radius,this.cursorLineX.geometry.vertices[0].z=e,this.cursorLineX.geometry.vertices[1].z=e,this.cursorLineX.geometry.verticesNeedUpdate=!0,this.cursorLineY.geometry.vertices[0].z=e,this.cursorLineY.geometry.vertices[1].z=e,this.cursorLineY.geometry.verticesNeedUpdate=!0,this.cursorLineZ.geometry.vertices[0].z=e,this.cursorLineZ.geometry.vertices[1].z=e+n+this.radius,this.cursorLineZ.geometry.verticesNeedUpdate=!0}update(){this.sphere.position.x+=this.vector.x,this.sphere.position.y+=this.vector.y,this.sphere.position.z+=this.vector.z}applyGravity(e){this.sphere.position.x+=e.x,this.sphere.position.y+=e.y,this.sphere.position.z+=e.z}calculateGravity(e){let t=new THREE.Vector3;for(let i=0;i<e.length;i++){if(this==e[i])continue;let n=e[i].sphere.position.x-this.sphere.position.x,r=e[i].sphere.position.y-this.sphere.position.y,s=e[i].sphere.position.z-this.sphere.position.z,c=Math.sqrt(n**2+r**2+s**2);n/=c,r/=c,s/=c;let u=(e[i].sphere.position.x-this.sphere.position.x)**2+(e[i].sphere.position.y-this.sphere.position.y)**2+(e[i].sphere.position.z-this.sphere.position.z)**2;u=Math.sqrt(u);let l=o*(this.mass*e[i].mass)/u**2;t.x+=n*l,t.y+=r*l,t.z+=s*l}return t.x+=this.vector.x,t.y+=this.vector.y,t.z+=this.vector.z,t}}function l(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].calculateGravity(e));for(let i=0;i<e.length;i++)e[i].applyGravity(t[i])}function p(e){let t=a(e,16711680,e.radius+n,0,0),i=a(e,65280,0,e.radius+n,0),r=a(e,255,0,0,e.radius+n);e.setCursors(t.cone,i.cone,r.cone),e.setCursorLines(t.line,i.line,r.line)}function a(e,t,i,n,o){let s=new THREE.LineBasicMaterial({color:t}),c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(e.x,e.y,e.z)),c.vertices.push(new THREE.Vector3(e.x+i,e.y+n,e.z+o));let u=new THREE.Line(c,s);T.add(u);let l=new THREE.ConeGeometry(.05*e.radius,r*e.radius,32),p=new THREE.MeshBasicMaterial({color:t}),a=new THREE.Mesh(l,p);return a.position.x=e.x+i,a.position.y=e.y+n,a.position.z=e.z+o,i>0?a.rotateZ(-Math.PI/2):o>0&&a.rotateX(Math.PI/2),T.add(a),{cone:a,line:u}}let h,d,y,m,E=!1;function v(e,t,i){let n=(new THREE.Vector3).unproject(L),r=new THREE.Vector3(e,t,i),o=new THREE.Vector3(r.x-n.x,r.y-n.y,r.z-n.z),s=-t*o.z/o.y+i;return{x:-t*o.x/o.y+e,y:0,z:s}}function w(e){if("a"==e.key){let e=v(L.position.x,L.position.y,L.position.z);!function(e,t,i,n,r){let o=new THREE.SphereGeometry(n,32,32),l=new THREE.MeshBasicMaterial({color:r}),a=new THREE.Mesh(o,l);a.position.set(e,t,i),T.add(a);let h=new u(e,t,i,n,r,a);p(h),s.push(h),c.push(a)}(e.x,e.y,e.z,.2,8388736)}}function f(){C.render(T,L),R.update(),function(){let e=parseInt(100*L.position.x)/100,t=parseInt(100*L.position.y)/100,i=parseInt(100*L.position.z)/100;h.innerHTML=`Camera position - ${e}, ${t}, ${i}<br>Camera effective FOV - ${L.getEffectiveFOV()}deg`}(),window.requestAnimationFrame(f),E&&function(){for(let e=0;e<s.length;e++)p(s[e]),l(s),s[e].update()}()}function g(e,t,i,n){let r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(0,0,0)),r.vertices.push(new THREE.Vector3(e,t,i));let o=new THREE.LineBasicMaterial({color:n}),s=new THREE.Line(r,o);T.add(s)}let x=!1;function b(){x=!1,document.getElementById("planetOptions").style.visibility="hidden";let e=document.getElementById("planetOptionsContent");e.style.visibility="hidden",e.innerHTML=""}function z(){try{h=document.getElementById("cameraPosition"),d=document.getElementById("intersection"),m=document.getElementById("planetOptionsClose"),y=document.getElementById("playButton"),console.log(y),y.onclick=(()=>{E?(E=!1,y.setAttribute("src","./img/play.png")):(y.setAttribute("src","./img/pause.png"),E=!0)}),m.onclick=(()=>{b()}),g(1,0,0,16711680),g(0,1,0,65280),g(0,0,1,255),function(){for(let e=0;e<11;e++){let t,i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(-5,0,1*(e-5))),i.vertices.push(new THREE.Vector3(5,0,1*(e-5))),t=e==parseInt(5.5)?new THREE.LineBasicMaterial({color:16711680}):new THREE.LineBasicMaterial({color:13421772});let n=new THREE.Line(i,t);T.add(n)}for(let e=0;e<11;e++){let t,i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(1*(e-5),0,-5)),i.vertices.push(new THREE.Vector3(1*(e-5),0,5)),t=e==parseInt(5.5)?new THREE.LineBasicMaterial({color:255}):new THREE.LineBasicMaterial({color:13421772});let n=new THREE.Line(i,t);T.add(n)}}(),H()}catch(e){console.log(e)}}function H(){let e;e=v(L.position.x,L.position.y,L.position.z);try{d.innerHTML=`Intersection at <br>${e.x}, ${e.y}, ${e.z}`}catch(e){console.log(e)}return e}i.d(t,"camera",function(){return L}),i.d(t,"scene",function(){return T}),i.d(t,"renderer",function(){return C}),i.d(t,"controls",function(){return R});let L,T,C,R,M,P,A=45,I=.1,X=1e4,Z=window.innerWidth/window.innerHeight,B=-4,Y=7,O=4;function V(e,t){return e.intersectObject(t,!1).length>0}let N=!1,G=null,j=null,S=0,U=0;function F(e,t,i){M.setFromCamera(P.clone(),L);let n=M.ray.origin,r=M.ray.direction;return{intersectionY:-n.x*r.y/r.x+n.y,intersectionZ:-n.x*r.z/r.x+n.z}}function $(){M.setFromCamera(P.clone(),L);let e=M.ray.origin,t=M.ray.direction;return{intersectionX:-e.y*t.x/t.y+e.x,intersectionZ:-e.y*t.z/t.y+e.z}}T=new THREE.Scene,(L=new THREE.PerspectiveCamera(A,Z,I,X)).position.set(B,Y,O),L.lookAt(0,0,0),(C=new THREE.WebGLRenderer).setSize(window.innerWidth,window.innerHeight),document.body.appendChild(C.domElement),(R=new THREE.OrbitControls(L,C.domElement)).enableDamping=!0,R.dampingFactor=.25,R.update(),C.render(T,L),M=new THREE.Raycaster,P=new THREE.Vector2(0,0),window.onresize=(()=>{Z=window.innerWidth/window.innerHeight,L.aspect=Z,L.updateProjectionMatrix(),C.setSize(window.innerWidth,window.innerHeight),C.render(T,L)}),window.onmousemove=(e=>{if(N)if("x"==G){let e=$();s[j].setPositionX(U+e.intersectionX-S)}else if("y"==G){let e=F();s[j].setPositionY(U+e.intersectionY-S)}else{let e=F();s[j].setPositionZ(U+e.intersectionZ-S)}P.x=e.clientX/window.innerWidth*2-1,P.y=-e.clientY/window.innerHeight*2+1}),window.onmousedown=(()=>{if(function(){M.setFromCamera(P,L);for(let e=0;e<c.length;e++){if(V(M,s[e].xCursor))return G="x",U=s[j=e].sphere.position.x,!0;if(V(M,s[e].yCursor))return G="y",U=s[j=e].sphere.position.y,!0;if(V(M,s[e].zCursor))return G="z",U=s[j=e].sphere.position.z,!0}return!1}())R.enabled=!1,N=!0,S="x"==G?$().intersectionX:"y"==G?F().intersectionY:F().intersectionZ;else{let e=function(){M.setFromCamera(P,L);for(let e=0;e<s.length;e++)if(V(M,s[e].sphere))return s[e];return null}();e?function(e){x&&b(),x=!0,document.getElementById("planetOptions").style.visibility="visible";let t=document.getElementById("planetOptionsContent");t.style.visibility="visible";let i=document.createElement("p");i.innerHTML="Density - ",t.appendChild(i);let n=document.createElement("input");n.setAttribute("type","number"),n.setAttribute("value",e.density),n.onchange=(()=>{e.density=n.value}),t.appendChild(n);let r=document.createElement("p");r.innerHTML="Initial velocity",t.appendChild(r);let o=document.createElement("input");o.setAttribute("type","number"),o.setAttribute("value",e.vector.x),o.onchange=(()=>{e.vector.x=Number(o.value)}),t.appendChild(o);let s=document.createElement("input");s.setAttribute("type","number"),s.setAttribute("value",e.vector.y),s.onchange=(()=>{e.vector.y=Number(s.value)}),t.appendChild(s);let c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("value",e.vector.z),c.onchange=(()=>{e.vector.z=Number(c.value)}),t.appendChild(c);let u=document.createElement("p");u.innerHTML="Position",t.appendChild(u);let l=document.createElement("input");l.setAttribute("type","number"),l.setAttribute("value",e.sphere.position.x),l.onchange=(()=>{e.setPositionX(Number(l.value))}),t.appendChild(l);let p=document.createElement("input");p.setAttribute("type","number"),p.setAttribute("value",e.sphere.position.y),p.onchange=(()=>{e.setPositionY(Number(p.value))}),t.appendChild(p);let a=document.createElement("input");a.setAttribute("type","number"),a.setAttribute("value",e.sphere.position.z),a.onchange=(()=>{e.setPositionZ(Number(a.value))}),t.appendChild(a)}(e):R.enabled=!0}}),window.onmouseup=(()=>{N=!1}),window.onclick=(()=>{H()}),window.onkeypress=(e=>{w(e)}),window.onload=(()=>{z(),f()})}]);